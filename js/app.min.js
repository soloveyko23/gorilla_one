(()=>{var e={144:function(e){e.exports=function(){"use strict";const e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),s=e&&window.devicePixelRatio>1,a={elements_selector:".lazy",container:t||e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},i=e=>Object.assign({},a,e),n=function(e,t){let s;const a="LazyLoad::Initialized",i=new e(t);try{s=new CustomEvent(a,{detail:{instance:i}})}catch(e){s=document.createEvent("CustomEvent"),s.initCustomEvent(a,!1,!1,{instance:i})}window.dispatchEvent(s)},o="src",l="srcset",r="sizes",c="poster",d="llOriginalAttrs",m="data",u="loading",h="loaded",g="applied",_="error",p="native",b="data-",f="ll-status",v=(e,t)=>e.getAttribute(b+t),E=e=>v(e,f),I=(e,t)=>((e,t,s)=>{const a=b+t;null!==s?e.setAttribute(a,s):e.removeAttribute(a)})(e,f,t),L=e=>I(e,null),y=e=>null===E(e),k=e=>E(e)===p,C=[u,h,g,_],w=(e,t,s,a)=>{e&&"function"==typeof e&&(void 0===a?void 0===s?e(t):e(t,s):e(t,s,a))},A=(t,s)=>{e&&""!==s&&t.classList.add(s)},S=(t,s)=>{e&&""!==s&&t.classList.remove(s)},T=e=>e.llTempImage,x=(e,t)=>{if(!t)return;const s=t._observer;s&&s.unobserve(e)},O=(e,t)=>{e&&(e.loadingCount+=t)},G=(e,t)=>{e&&(e.toLoadCount=t)},X=e=>{let t=[];for(let s,a=0;s=e.children[a];a+=1)"SOURCE"===s.tagName&&t.push(s);return t},M=(e,t)=>{const s=e.parentNode;s&&"PICTURE"===s.tagName&&X(s).forEach(t)},F=(e,t)=>{X(e).forEach(t)},q=[o],D=[o,c],P=[o,l,r],z=[m],B=e=>!!e[d],N=e=>e[d],R=e=>delete e[d],H=(e,t)=>{if(B(e))return;const s={};t.forEach((t=>{s[t]=e.getAttribute(t)})),e[d]=s},V=(e,t)=>{if(!B(e))return;const s=N(e);t.forEach((t=>{((e,t,s)=>{s?e.setAttribute(t,s):e.removeAttribute(t)})(e,t,s[t])}))},J=(e,t,s)=>{A(e,t.class_applied),I(e,g),s&&(t.unobserve_completed&&x(e,t),w(t.callback_applied,e,s))},$=(e,t,s)=>{A(e,t.class_loading),I(e,u),s&&(O(s,1),w(t.callback_loading,e,s))},j=(e,t,s)=>{s&&e.setAttribute(t,s)},U=(e,t)=>{j(e,r,v(e,t.data_sizes)),j(e,l,v(e,t.data_srcset)),j(e,o,v(e,t.data_src))},K={IMG:(e,t)=>{M(e,(e=>{H(e,P),U(e,t)})),H(e,P),U(e,t)},IFRAME:(e,t)=>{H(e,q),j(e,o,v(e,t.data_src))},VIDEO:(e,t)=>{F(e,(e=>{H(e,q),j(e,o,v(e,t.data_src))})),H(e,D),j(e,c,v(e,t.data_poster)),j(e,o,v(e,t.data_src)),e.load()},OBJECT:(e,t)=>{H(e,z),j(e,m,v(e,t.data_src))}},Q=["IMG","IFRAME","VIDEO","OBJECT"],W=(e,t)=>{!t||(e=>e.loadingCount>0)(t)||(e=>e.toLoadCount>0)(t)||w(e.callback_finish,t)},Y=(e,t,s)=>{e.addEventListener(t,s),e.llEvLisnrs[t]=s},Z=(e,t,s)=>{e.removeEventListener(t,s)},ee=e=>!!e.llEvLisnrs,te=e=>{if(!ee(e))return;const t=e.llEvLisnrs;for(let s in t){const a=t[s];Z(e,s,a)}delete e.llEvLisnrs},se=(e,t,s)=>{(e=>{delete e.llTempImage})(e),O(s,-1),(e=>{e&&(e.toLoadCount-=1)})(s),S(e,t.class_loading),t.unobserve_completed&&x(e,s)},ae=(e,t,s)=>{const a=T(e)||e;ee(a)||((e,t,s)=>{ee(e)||(e.llEvLisnrs={});const a="VIDEO"===e.tagName?"loadeddata":"load";Y(e,a,t),Y(e,"error",s)})(a,(i=>{((e,t,s,a)=>{const i=k(t);se(t,s,a),A(t,s.class_loaded),I(t,h),w(s.callback_loaded,t,a),i||W(s,a)})(0,e,t,s),te(a)}),(i=>{((e,t,s,a)=>{const i=k(t);se(t,s,a),A(t,s.class_error),I(t,_),w(s.callback_error,t,a),s.restore_on_error&&V(t,P),i||W(s,a)})(0,e,t,s),te(a)}))},ie=(e,t,a)=>{(e=>Q.indexOf(e.tagName)>-1)(e)?((e,t,s)=>{ae(e,t,s),((e,t,s)=>{const a=K[e.tagName];a&&(a(e,t),$(e,t,s))})(e,t,s)})(e,t,a):((e,t,a)=>{(e=>{e.llTempImage=document.createElement("IMG")})(e),ae(e,t,a),(e=>{B(e)||(e[d]={backgroundImage:e.style.backgroundImage})})(e),((e,t,a)=>{const i=v(e,t.data_bg),n=v(e,t.data_bg_hidpi),l=s&&n?n:i;l&&(e.style.backgroundImage=`url("${l}")`,T(e).setAttribute(o,l),$(e,t,a))})(e,t,a),((e,t,a)=>{const i=v(e,t.data_bg_multi),n=v(e,t.data_bg_multi_hidpi),o=s&&n?n:i;o&&(e.style.backgroundImage=o,J(e,t,a))})(e,t,a),((e,t,s)=>{const a=v(e,t.data_bg_set);if(!a)return;let i=a.split("|").map((e=>`image-set(${e})`));e.style.backgroundImage=i.join(),J(e,t,s)})(e,t,a)})(e,t,a)},ne=e=>{e.removeAttribute(o),e.removeAttribute(l),e.removeAttribute(r)},oe=e=>{M(e,(e=>{V(e,P)})),V(e,P)},le={IMG:oe,IFRAME:e=>{V(e,q)},VIDEO:e=>{F(e,(e=>{V(e,q)})),V(e,D),e.load()},OBJECT:e=>{V(e,z)}},re=(e,t)=>{(e=>{const t=le[e.tagName];t?t(e):(e=>{if(!B(e))return;const t=N(e);e.style.backgroundImage=t.backgroundImage})(e)})(e),((e,t)=>{y(e)||k(e)||(S(e,t.class_entered),S(e,t.class_exited),S(e,t.class_applied),S(e,t.class_loading),S(e,t.class_loaded),S(e,t.class_error))})(e,t),L(e),R(e)},ce=["IMG","IFRAME","VIDEO"],de=e=>e.use_native&&"loading"in HTMLImageElement.prototype,me=(e,t,s)=>{e.forEach((e=>(e=>e.isIntersecting||e.intersectionRatio>0)(e)?((e,t,s,a)=>{const i=(e=>C.indexOf(E(e))>=0)(e);I(e,"entered"),A(e,s.class_entered),S(e,s.class_exited),((e,t,s)=>{t.unobserve_entered&&x(e,s)})(e,s,a),w(s.callback_enter,e,t,a),i||ie(e,s,a)})(e.target,e,t,s):((e,t,s,a)=>{y(e)||(A(e,s.class_exited),((e,t,s,a)=>{s.cancel_on_exit&&(e=>E(e)===u)(e)&&"IMG"===e.tagName&&(te(e),(e=>{M(e,(e=>{ne(e)})),ne(e)})(e),oe(e),S(e,s.class_loading),O(a,-1),L(e),w(s.callback_cancel,e,t,a))})(e,t,s,a),w(s.callback_exit,e,t,a))})(e.target,e,t,s)))},ue=e=>Array.prototype.slice.call(e),he=e=>e.container.querySelectorAll(e.elements_selector),ge=e=>(e=>E(e)===_)(e),_e=(e,t)=>(e=>ue(e).filter(y))(e||he(t)),pe=function(t,s){const a=i(t);this._settings=a,this.loadingCount=0,((e,t)=>{de(e)||(t._observer=new IntersectionObserver((s=>{me(s,e,t)}),(e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}))(e)))})(a,this),((t,s)=>{e&&(s._onlineHandler=()=>{((e,t)=>{var s;(s=he(e),ue(s).filter(ge)).forEach((t=>{S(t,e.class_error),L(t)})),t.update()})(t,s)},window.addEventListener("online",s._onlineHandler))})(a,this),this.update(s)};return pe.prototype={update:function(e){const s=this._settings,a=_e(e,s);var i,n;G(this,a.length),t?this.loadAll(a):de(s)?((e,t,s)=>{e.forEach((e=>{-1!==ce.indexOf(e.tagName)&&((e,t,s)=>{e.setAttribute("loading","lazy"),ae(e,t,s),((e,t)=>{const s=K[e.tagName];s&&s(e,t)})(e,t),I(e,p)})(e,t,s)})),G(s,0)})(a,s,this):(n=a,(e=>{e.disconnect()})(i=this._observer),((e,t)=>{t.forEach((t=>{e.observe(t)}))})(i,n))},destroy:function(){this._observer&&this._observer.disconnect(),e&&window.removeEventListener("online",this._onlineHandler),he(this._settings).forEach((e=>{R(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;_e(e,t).forEach((e=>{x(e,this),ie(e,t,this)}))},restoreAll:function(){const e=this._settings;he(e).forEach((t=>{re(t,e)}))}},pe.load=(e,t)=>{const s=i(t);ie(e,s)},pe.resetStatus=e=>{L(e)},e&&((e,t)=>{if(t)if(t.length)for(let s,a=0;s=t[a];a+=1)n(e,s);else n(e,t)})(pe,window.lazyLoadOptions),pe}()}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}(()=>{"use strict";new(s(144))({elements_selector:"[data-src],[data-srcset]",class_loaded:"_lazy-loaded",use_native:!0});let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);class t{constructor(){this.gameContainer=document.querySelector(".game-container"),this.gameElement=this.gameContainer?this.gameContainer.querySelector(".page__game"):null,this.items=this.gameElement?Array.from(this.gameElement.querySelectorAll(".game__item")):[],this.playButton=document.getElementById("startGameBtn"),this.bonusBigImage="img/bonus/bonus-big.webp",this.bonusMedImage="img/bonus/bonus-med.webp",this.initialImages=[],this.clickedOnce=!1,this.secondClick=!1,this.isFirstGame=!0,this.isSecondGame=!1,this.shuffleCount=10,this.shuffleDelay=500,this.clickDelay=1e3,this.init()}init(){this.playButton&&this.playButton.addEventListener("click",(()=>this.startGame())),this.saveInitialImages(),this.disableItemClick()}saveInitialImages(){this.initialImages=this.items.map((e=>{const t=e.querySelector(".game__item .game__bonus-ball img");return t?t.getAttribute("data-src")||t.src:""}))}startGame(){this.gameContainer&&this.items.length?(this.gameContainer.classList.add("start-game"),this.items.forEach((e=>e.classList.remove("item-active"))),setTimeout((()=>{this.performShuffles(this.shuffleCount)}),this.clickDelay)):console.error("Game container or items not found")}performShuffles(e){let t=0;const s=()=>{t<e?(this.shuffleItems(),t++,setTimeout(s,this.shuffleDelay)):setTimeout((()=>{this.enableItemClick(),this.addChooseItemClass()}),this.shuffleDelay)};s()}shuffleItems(){const e=this.items.length,t=Array.from({length:e},((e,t)=>t)),s=this.shuffleArray([...t]);this.items.forEach(((e,t)=>{e.setAttribute("data-index-item",s[t]),e.style.transform=this.getTransform(t,s[t])}))}shuffleArray(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}getTransform(e,t){return window.matchMedia("(max-width: 480px)").matches?this.getTransformForSmallScreen(e,t):this.getTransformForLargeScreen(e,t)}getTransformForSmallScreen(e,t){return 0===e?1===t?"translateX(calc(100% + 6vmin))":2===t?"translateX(calc(200% + 12vmin))":"translateX(0)":1===e?0===t?"translateX(calc(-100% - 6vmin))":2===t?"translateX(calc(100% + 6vmin))":"translateX(0)":2===e?0===t?"translateX(calc(-200% - 12vmin))":1===t?"translateX(calc(-100% - 6vmin))":"translateX(0)":"translateX(0)"}getTransformForLargeScreen(e,t){return 0===e?1===t?"translateX(calc(100% + 3vmin))":2===t?"translateX(calc(200% + 6vmin))":"translateX(0)":1===e?0===t?"translateX(calc(-100% - 3vmin))":2===t?"translateX(calc(100% + 3vmin))":"translateX(0)":2===e?0===t?"translateX(calc(-200% - 6vmin))":1===t?"translateX(calc(-100% - 3vmin))":"translateX(0)":"translateX(0)"}enableItemClick(){this.items.forEach((e=>{e&&e.addEventListener("click",this.handleItemClick.bind(this))}))}disableItemClick(){this.items.forEach((e=>{e&&e.removeEventListener("click",this.handleItemClick.bind(this))}))}handleItemClick(e){if(this.clickedOnce&&this.secondClick)return;const t=e.currentTarget;t&&!t.classList.contains("item-active")&&setTimeout((()=>{const e=t.querySelector(".game__bonus-ball img");if(e){const t=this.isFirstGame?this.bonusBigImage:this.bonusMedImage;e.src=t}t.classList.add("item-active"),setTimeout((()=>{this.clickedOnce?this.secondClick||(this.secondClick=!0,this.showPopupStage(2)):(this.clickedOnce=!0,this.showPopupStage(1))}),500)}),0)}showPopupStage(e){this.hideAllPopups();const t=document.querySelector(`[data-popup-stage="${e}"]`);if(t){document.documentElement.classList.add("popup-show"),t.classList.add("popup_show");const e=t.querySelector(".button-next-game");e&&e.addEventListener("click",(()=>{this.closePopup(t),this.endGame(),this.updateTranslation()}))}}hideAllPopups(){document.querySelectorAll("[data-popup-stage]").forEach((e=>{e.classList.remove("popup_show"),document.documentElement.classList.remove("popup-show")}))}closePopup(e){e.classList.remove("popup_show"),document.documentElement.classList.remove("popup-show")}addChooseItemClass(){this.gameContainer&&this.gameContainer.classList.add("choose-item")}endGame(){this.isSecondGame&&this.resetItemPositions(),this.clickedOnce=!1,this.secondClick=!1,this.isFirstGame?(this.isFirstGame=!1,this.isSecondGame=!0,this.restoreInitialImages(),this.resetItemPositions()):this.isSecondGame=!1,this.gameContainer.classList.remove("start-game","choose-item"),this.disableItemClick()}restoreInitialImages(){this.items.forEach(((e,t)=>{const s=e.querySelector(".game__bonus-ball img");s&&this.initialImages[t]&&(s.src=this.initialImages[t])}))}resetItemPositions(){this.items.forEach(((e,t)=>{e.removeAttribute("style"),e.classList.remove("item-active")}))}updateTranslation(){const e=window.deepl;"function"==typeof e&&e()}}document.addEventListener("DOMContentLoaded",(()=>{new t})),document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.querySelector(".page__button-play");e&&setInterval((()=>{e.classList.add("animate"),setTimeout((()=>{e.classList.remove("animate")}),3e3)}),8e3)})(),(()=>{const e=document.querySelector(".page__game");e&&setInterval((()=>{e.classList.add("animate"),e.classList.remove("start"),setTimeout((()=>{e.classList.remove("animate"),e.classList.add("start")}),3e3)}),15e3)})()})),window.FLS=!0})()})();