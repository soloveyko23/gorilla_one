(()=>{"use strict";let t=!1;setTimeout((()=>{if(t){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0);class e{constructor(){this.gameContainer=document.querySelector(".game-container"),console.log("gameContainer:",this.gameContainer),this.gameElement=this.gameContainer?this.gameContainer.querySelector(".page__game"):null,console.log("gameElement:",this.gameElement),this.itemContainers=this.gameElement?Array.from(this.gameElement.querySelectorAll(".game__item")):[],console.log("itemContainers:",this.itemContainers),this.items=this.itemContainers,console.log("items:",this.items),this.playButton=document.getElementById("startGameBtn"),console.log("playButton:",this.playButton),this.bonusBigImage="img/bonus/bonus-big.webp",this.clickedOnce=!1,this.shuffleCount=10,this.shuffleDelay=500,this.clickDelay=1e3,this.init()}init(){this.playButton?this.playButton.addEventListener("click",(()=>this.startGame())):console.error("Play button not found"),this.disableItemClick()}startGame(){this.gameContainer&&this.items.length?(this.gameContainer.classList.add("start-game"),this.items.forEach((t=>t.classList.remove("item-active"))),setTimeout((()=>{this.performShuffles(this.shuffleCount)}),this.clickDelay)):console.error("Game container or items not found")}performShuffles(t){let e=0;const s=()=>{e<t?(this.shuffleItems(),e++,setTimeout(s,this.shuffleDelay)):setTimeout((()=>{this.enableItemClick(),this.addChooseItemClass()}),this.shuffleDelay)};s()}shuffleItems(){const t=this.items.length,e=Array.from({length:t},((t,e)=>e)),s=this.shuffleArray([...e]);this.items.forEach(((t,e)=>{t.setAttribute("data-index-item",s[e]),t.style.transform=this.getTransform(e,s[e])})),console.log("Shuffled indices:",s)}shuffleArray(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}getTransform(t,e){const s=window.matchMedia("(max-width: 480px)").matches;return window.matchMedia("(min-width: 480px)").matches?0===t?1===e?"translateX(calc(100% + 3vmin))":2===e?"translateX(calc(200% + 6vmin))":"translateX(0)":1===t?0===e?"translateX(calc(-100% - 3vmin))":2===e?"translateX(calc(100% + 3vmin))":"translateX(0)":2===t?0===e?"translateX(calc(-200% - 6vmin))":1===e?"translateX(calc(-100% - 3vmin))":"translateX(0)":"translateX(0)":s?0===t?1===e?"translateX(calc(100% + 6vmin))":2===e?"translateX(calc(200% + 12vmin))":"translateX(0)":1===t?0===e?"translateX(calc(-100% - 6vmin))":2===e?"translateX(calc(100% + 6vmin))":"translateX(0)":2===t?0===e?"translateX(calc(-200% - 12vmin))":1===e?"translateX(calc(-100% - 6vmin))":"translateX(0)":"translateX(0)":void 0}enableItemClick(){this.items.forEach((t=>{t&&(t.addEventListener("click",this.handleItemClick.bind(this)),console.log("Added click listener to:",t))}))}disableItemClick(){this.items.forEach((t=>{t&&(t.removeEventListener("click",this.handleItemClick.bind(this)),console.log("Removed click listener from:",t))}))}handleItemClick(t){if(console.log("Click event:",t),this.clickedOnce)return;const e=t.currentTarget;e&&!e.classList.contains("item-active")&&setTimeout((()=>{const t=e.querySelector(".game__bonus-ball img");t&&(t.src=this.bonusBigImage),e.classList.add("item-active"),this.clickedOnce=!0,console.log("Item clicked:",e)}),0)}addChooseItemClass(){this.gameContainer&&(this.gameContainer.classList.add("choose-item"),console.log("Class choose-item added"))}}document.addEventListener("DOMContentLoaded",(()=>{new e})),document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector(".page__button-play");t&&setInterval((()=>{t.classList.add("animate"),setTimeout((()=>{t.classList.remove("animate")}),3e3)}),8e3)})(),(()=>{const t=document.querySelector(".page__game");t&&setInterval((()=>{t.classList.add("animate"),t.classList.remove("start"),setTimeout((()=>{t.classList.remove("animate"),t.classList.add("start")}),3e3)}),15e3)})()})),window.FLS=!0})();